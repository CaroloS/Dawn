{"version":3,"sources":["../src/weekview.ts"],"names":[],"mappings":"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","file":"weekview.js","sourceRoot":"","sourcesContent":["import { DatePipe } from '@angular/common';\nimport { Slides } from 'ionic-angular';\nimport { Component, OnInit, OnChanges, HostBinding, Input, Output, EventEmitter, SimpleChanges, ViewChild, ViewEncapsulation, TemplateRef, ElementRef } from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { ICalendarComponent, IDisplayEvent, IEvent, ITimeSelected, IRange, IWeekView, IWeekViewRow, IWeekViewDateRow, CalendarMode, IDateFormatter } from './calendar';\nimport { CalendarService } from './calendar.service';\nimport { IDisplayAllDayEvent } from \"./calendar\";\n\n\nexport class WeekViewComponent implements ICalendarComponent, OnInit, OnChanges {\n     slider:Slides;\n     class = true;\n\n     weekviewAllDayEventTemplate:TemplateRef<IDisplayAllDayEvent>;\n     weekviewNormalEventTemplate:TemplateRef<IDisplayEvent>;\n\n     formatWeekTitle:string;\n     formatWeekViewDayHeader:string;\n     formatHourColumn:string;\n     startingDayWeek:number;\n     allDayLabel:string;\n     hourParts:number;\n     eventSource:IEvent[];\n     markDisabled:(date:Date) => boolean;\n     locale:string;\n     dateFormatter:IDateFormatter;\n     dir:string = \"\";\n     scrollToHour:number = 0;\n     preserveScrollPosition:boolean;\n     lockSwipeToPrev:boolean;\n     lockSwipes:boolean;\n     startHour:number;\n     endHour:number;\n\n     onRangeChanged = new EventEmitter<IRange>();\n     onEventSelected = new EventEmitter<IEvent>();\n     onTimeSelected = new EventEmitter<ITimeSelected>();\n     onTitleChanged = new EventEmitter<string>(true);\n\n    public views:IWeekView[] = [];\n    public currentViewIndex = 0;\n    public range:IRange;\n    public direction = 0;\n    public mode:CalendarMode = 'week';\n\n    private inited = false;\n    private callbackOnInit = true;\n    private currentDateChangedFromParentSubscription:Subscription;\n    private eventSourceChangedSubscription:Subscription;\n    private hourColumnLabels:string[];\n    private initScrollPosition:number;\n    private formatDayHeader:(date:Date) => string;\n    private formatTitle:(date:Date) => string;\n    private formatHourColumnLabel:(date:Date) => string;\n    private hourRange:number;\n\n    constructor(private calendarService:CalendarService, private elm:ElementRef) {\n    }\n\n    ngOnInit() {\n        this.hourRange = this.endHour - this.startHour;\n        if (this.dateFormatter && this.dateFormatter.formatWeekViewDayHeader) {\n            this.formatDayHeader = this.dateFormatter.formatWeekViewDayHeader;\n        } else {\n            var datePipe = new DatePipe(this.locale);\n            this.formatDayHeader = function (date:Date) {\n                return datePipe.transform(date, this.formatWeekViewDayHeader);\n            };\n        }\n\n        if (this.dateFormatter && this.dateFormatter.formatWeekViewTitle) {\n            this.formatTitle = this.dateFormatter.formatWeekViewTitle;\n        } else {\n            var datePipe = new DatePipe(this.locale);\n            this.formatTitle = function (date:Date) {\n                return datePipe.transform(date, this.formatWeekTitle);\n            };\n        }\n\n        if (this.dateFormatter && this.dateFormatter.formatWeekViewHourColumn) {\n            this.formatHourColumnLabel = this.dateFormatter.formatWeekViewHourColumn;\n        } else {\n            var datePipe = new DatePipe(this.locale);\n            this.formatHourColumnLabel = function (date:Date) {\n                return datePipe.transform(date, this.formatHourColumn);\n            };\n        }\n\n        if (this.lockSwipeToPrev) {\n            this.slider.lockSwipeToPrev(true);\n        }\n\n        if (this.lockSwipes) {\n            this.slider.lockSwipes(true);\n        }\n\n        this.refreshView();\n        this.hourColumnLabels = this.getHourColumnLabels();\n        this.inited = true;\n\n        this.currentDateChangedFromParentSubscription = this.calendarService.currentDateChangedFromParent$.subscribe(currentDate => {\n            this.refreshView();\n        });\n\n        this.eventSourceChangedSubscription = this.calendarService.eventSourceChanged$.subscribe(() => {\n            this.onDataLoaded();\n        });\n    }\n\n    ngAfterViewInit() {\n        let title = this.getTitle();\n        this.onTitleChanged.emit(title);\n\n        if (this.scrollToHour > 0) {\n            let hourColumns = this.elm.nativeElement.querySelector('.weekview-normal-event-container').querySelectorAll('.calendar-hour-column');\n            var me = this;\n            setTimeout(function () {\n                me.initScrollPosition = hourColumns[me.scrollToHour - me.startHour].offsetTop;\n            }, 0);\n        }\n    }\n\n    ngOnChanges(changes:SimpleChanges) {\n        if (!this.inited) return;\n\n        let eventSourceChange = changes['eventSource'];\n        if (eventSourceChange && eventSourceChange.currentValue) {\n            this.onDataLoaded();\n        }\n\n        let lockSwipeToPrev = changes['lockSwipeToPrev'];\n        if (lockSwipeToPrev) {\n            this.slider.lockSwipeToPrev(lockSwipeToPrev.currentValue);\n        }\n\n        let lockSwipes = changes['lockSwipesv'];\n        if (lockSwipes) {\n            this.slider.lockSwipes(lockSwipes.currentValue);\n        }\n    }\n\n    ngOnDestroy() {\n        if (this.currentDateChangedFromParentSubscription) {\n            this.currentDateChangedFromParentSubscription.unsubscribe();\n            this.currentDateChangedFromParentSubscription = null;\n        }\n\n        if (this.eventSourceChangedSubscription) {\n            this.eventSourceChangedSubscription.unsubscribe();\n            this.eventSourceChangedSubscription = null;\n        }\n    }\n\n    onSlideChanged() {\n        if (this.callbackOnInit) {\n            this.callbackOnInit = false;\n            return;\n        }\n\n        let currentSlideIndex = this.slider.getActiveIndex(),\n            direction = 0,\n            currentViewIndex = this.currentViewIndex;\n\n        currentSlideIndex = (currentSlideIndex + 2) % 3;\n        if (currentSlideIndex - currentViewIndex === 1) {\n            direction = 1;\n        } else if (currentSlideIndex === 0 && currentViewIndex === 2) {\n            direction = 1;\n            this.slider.slideTo(1, 0, false);\n        } else if (currentViewIndex - currentSlideIndex === 1) {\n            direction = -1;\n        } else if (currentSlideIndex === 2 && currentViewIndex === 0) {\n            direction = -1;\n            this.slider.slideTo(3, 0, false);\n        }\n        this.currentViewIndex = currentSlideIndex;\n        this.move(direction);\n    }\n\n    move(direction:number) {\n        if (direction === 0) {\n            return;\n        }\n        this.direction = direction;\n        let adjacent = this.calendarService.getAdjacentCalendarDate(this.mode, direction);\n        this.calendarService.setCurrentDate(adjacent);\n        this.refreshView();\n        this.direction = 0;\n    }\n\n    static createDateObjects(startTime:Date, startHour: number, endHour: number):IWeekViewRow[][] {\n        let times:IWeekViewRow[][] = [],\n            currentHour = startTime.getHours(),\n            currentDate = startTime.getDate();\n\n        for (let hour = startHour; hour < endHour; hour += 1) {\n            let row:IWeekViewRow[] = [];\n            for (let day = 0; day < 7; day += 1) {\n                let time = new Date(startTime.getTime());\n                time.setHours(currentHour + hour);\n                time.setDate(currentDate + day);\n                row.push({\n                    events: [],\n                    time: time\n                });\n            }\n            times.push(row);\n        }\n        return times;\n    }\n\n    static getDates(startTime:Date, n:number):IWeekViewDateRow[] {\n        let dates = new Array(n),\n            current = new Date(startTime.getTime()),\n            i = 0;\n        current.setHours(12); // Prevent repeated dates because of timezone bug\n        while (i < n) {\n            dates[i++] = {\n                date: new Date(current.getTime()),\n                events: []\n            };\n            current.setDate(current.getDate() + 1);\n        }\n        return dates;\n    }\n\n    private getHourColumnLabels():string[] {\n        let hourColumnLabels:string[] = [];\n        for (let hour = 0, length = this.views[0].rows.length; hour < length; hour += 1) {\n            hourColumnLabels.push(this.formatHourColumnLabel(this.views[0].rows[hour][0].time));\n        }\n        return hourColumnLabels;\n    }\n\n    getViewData(startTime:Date):IWeekView {\n        let dates = WeekViewComponent.getDates(startTime, 7);\n        let dayHeaders:string[] = [];\n        for (let i = 0; i < 7; i++) {\n            dayHeaders.push(this.formatDayHeader(dates[i].date));\n        }\n\n        return {\n            rows: WeekViewComponent.createDateObjects(startTime, this.startHour, this.endHour),\n            dates: dates,\n            dayHeaders: dayHeaders\n        };\n    }\n\n    getRange(currentDate:Date):IRange {\n        let year = currentDate.getFullYear(),\n            month = currentDate.getMonth(),\n            date = currentDate.getDate(),\n            day = currentDate.getDay(),\n            difference = day - this.startingDayWeek;\n\n        if (difference < 0) {\n            difference += 7;\n        }\n\n        let firstDayOfWeek = new Date(year, month, date - difference);\n        let endTime = new Date(year, month, date - difference + 7);\n\n        return {\n            startTime: firstDayOfWeek,\n            endTime: endTime\n        };\n    }\n\n    onDataLoaded() {\n        let eventSource = this.eventSource,\n            len = eventSource ? eventSource.length : 0,\n            startTime = this.range.startTime,\n            endTime = this.range.endTime,\n            utcStartTime = new Date(Date.UTC(startTime.getFullYear(), startTime.getMonth(), startTime.getDate())),\n            utcEndTime = new Date(Date.UTC(endTime.getFullYear(), endTime.getMonth(), endTime.getDate())),\n            currentViewIndex = this.currentViewIndex,\n            rows = this.views[currentViewIndex].rows,\n            dates = this.views[currentViewIndex].dates,\n            oneHour = 3600000,\n            oneDay = 86400000,\n        // add allday eps\n            eps = 0.016,\n            allDayEventInRange = false,\n            normalEventInRange = false;\n\n        for (let i = 0; i < 7; i += 1) {\n            dates[i].events = [];\n        }\n\n        for (let day = 0; day < 7; day += 1) {\n            for (let hour = 0; hour < this.hourRange; hour += 1) {\n                rows[hour][day].events = [];\n            }\n        }\n        for (let i = 0; i < len; i += 1) {\n            let event = eventSource[i];\n            let eventStartTime = new Date(event.startTime.getTime());\n            let eventEndTime = new Date(event.endTime.getTime());\n\n            if (event.allDay) {\n                if (eventEndTime <= utcStartTime || eventStartTime >= utcEndTime) {\n                    continue;\n                } else {\n                    allDayEventInRange = true;\n\n                    let allDayStartIndex:number;\n                    if (eventStartTime <= utcStartTime) {\n                        allDayStartIndex = 0;\n                    } else {\n                        allDayStartIndex = Math.floor((eventStartTime.getTime() - utcStartTime.getTime()) / oneDay);\n                    }\n\n                    let allDayEndIndex:number;\n                    if (eventEndTime >= utcEndTime) {\n                        allDayEndIndex = Math.ceil((utcEndTime.getTime() - utcStartTime.getTime()) / oneDay);\n                    } else {\n                        allDayEndIndex = Math.ceil((eventEndTime.getTime() - utcStartTime.getTime()) / oneDay);\n                    }\n\n                    let displayAllDayEvent:IDisplayEvent = {\n                        event: event,\n                        startIndex: allDayStartIndex,\n                        endIndex: allDayEndIndex\n                    };\n\n                    let eventSet = dates[allDayStartIndex].events;\n                    if (eventSet) {\n                        eventSet.push(displayAllDayEvent);\n                    } else {\n                        eventSet = [];\n                        eventSet.push(displayAllDayEvent);\n                        dates[allDayStartIndex].events = eventSet;\n                    }\n                }\n            } else {\n                if (eventEndTime <= startTime || eventStartTime >= endTime) {\n                    continue;\n                } else {\n                    normalEventInRange = true;\n\n                    let timeDiff:number;\n                    let timeDifferenceStart:number;\n                    if (eventStartTime <= startTime) {\n                        timeDifferenceStart = 0;\n                    } else {\n                        timeDiff = eventStartTime.getTime() - startTime.getTime() - (eventStartTime.getTimezoneOffset() - startTime.getTimezoneOffset()) * 60000;\n                        timeDifferenceStart = timeDiff / oneHour;\n                    }\n\n                    let timeDifferenceEnd:number;\n                    if (eventEndTime >= endTime) {\n                        timeDiff = endTime.getTime() - startTime.getTime() - (endTime.getTimezoneOffset() - startTime.getTimezoneOffset()) * 60000;\n                        timeDifferenceEnd = timeDiff / oneHour;\n                    } else {\n                        timeDiff = eventEndTime.getTime() - startTime.getTime() - (eventEndTime.getTimezoneOffset() - startTime.getTimezoneOffset()) * 60000;\n                        timeDifferenceEnd = timeDiff / oneHour;\n                    }\n\n                    let startIndex = Math.floor(timeDifferenceStart),\n                        endIndex = Math.ceil(timeDifferenceEnd - eps),\n                        startRowIndex = startIndex % 24,\n                        dayIndex = Math.floor(startIndex / 24),\n                        endOfDay = dayIndex * 24,\n                        startOffset = 0,\n                        endOffset = 0;\n\n                    if (this.hourParts !== 1) {\n                        if(startRowIndex < this.startHour) {\n                            startOffset = 0;\n                        } else {\n                        startOffset = Math.floor((timeDifferenceStart - startIndex) * this.hourParts);\n                    }\n                    }\n\n                    do {\n                        endOfDay += 24;\n                        let endRowIndex:number;\n                        if (endOfDay <= endIndex) {\n                            endRowIndex = 24;\n                        } else {\n                            endRowIndex = endIndex % 24;\n                            if (this.hourParts !== 1) {\n                                if(endRowIndex > this.endHour) {\n                                    endOffset = 0;\n                                } else {\n                                endOffset = Math.floor((endIndex - timeDifferenceEnd) * this.hourParts);\n                            }\n                        }\n                        }\n                        if(startRowIndex < this.startHour) {\n                            startRowIndex = 0;\n                        } else {\n                            startRowIndex -= this.startHour;\n                        }\n                        if(endRowIndex > this.endHour) {\n                            endRowIndex = this.endHour;\n                        }\n                        endRowIndex -= this.startHour;\n\n                        if(startRowIndex < endRowIndex) {\n                        let displayEvent = {\n                            event: event,\n                            startIndex: startRowIndex,\n                            endIndex: endRowIndex,\n                            startOffset: startOffset,\n                            endOffset: endOffset\n                        };\n                        let eventSet = rows[startRowIndex][dayIndex].events;\n                        if (eventSet) {\n                            eventSet.push(displayEvent);\n                        } else {\n                            eventSet = [];\n                            eventSet.push(displayEvent);\n                            rows[startRowIndex][dayIndex].events = eventSet;\n                        }\n                        }\n                        startRowIndex = 0;\n                        startOffset = 0;\n                        dayIndex += 1;\n                    } while (endOfDay < endIndex);\n                }\n            }\n        }\n\n        if (normalEventInRange) {\n            for (let day = 0; day < 7; day += 1) {\n                let orderedEvents:IDisplayEvent[] = [];\n                for (let hour = 0; hour < this.hourRange; hour += 1) {\n                    if (rows[hour][day].events) {\n                        rows[hour][day].events.sort(WeekViewComponent.compareEventByStartOffset);\n                        orderedEvents = orderedEvents.concat(rows[hour][day].events);\n                    }\n                }\n                if (orderedEvents.length > 0) {\n                    this.placeEvents(orderedEvents);\n                }\n            }\n        }\n\n        if (allDayEventInRange) {\n            let orderedAllDayEvents:IDisplayEvent[] = [];\n            for (let day = 0; day < 7; day += 1) {\n                if (dates[day].events) {\n                    orderedAllDayEvents = orderedAllDayEvents.concat(dates[day].events);\n                }\n            }\n            if (orderedAllDayEvents.length > 0) {\n                this.placeAllDayEvents(orderedAllDayEvents);\n            }\n        }\n    }\n\n    refreshView() {\n        this.range = this.getRange(this.calendarService.currentDate);\n\n        if (this.inited) {\n            let title = this.getTitle();\n            this.onTitleChanged.emit(title);\n        }\n        this.calendarService.populateAdjacentViews(this);\n        this.calendarService.rangeChanged(this);\n    }\n\n    getTitle():string {\n        let firstDayOfWeek = this.range.startTime,\n            weekFormat = '$n',\n            weekNumberIndex = this.formatWeekTitle.indexOf(weekFormat),\n            title = this.formatTitle(firstDayOfWeek);\n\n        if (weekNumberIndex !== -1) {\n            let weekNumber = String(WeekViewComponent.getISO8601WeekNumber(firstDayOfWeek));\n            title = title.replace(weekFormat, weekNumber);\n        }\n\n        return title;\n    }\n\n    private static getISO8601WeekNumber(date:Date):number {\n        let dayOfWeekOnFirst = (new Date(date.getFullYear(), 0, 1)).getDay();\n        let firstThurs = new Date(date.getFullYear(), 0, ((dayOfWeekOnFirst <= 4) ? 5 : 12) - dayOfWeekOnFirst);\n        let thisThurs = new Date(date.getFullYear(), date.getMonth(), date.getDate() + (4 - date.getDay()));\n        let diff = +thisThurs - +firstThurs;\n        return (1 + Math.round(diff / 6.048e8)); // 6.048e8 ms per week\n    }\n\n    private static compareEventByStartOffset(eventA:IDisplayEvent, eventB:IDisplayEvent):number {\n        return eventA.startOffset - eventB.startOffset;\n    }\n\n    select(selectedTime:Date, events:IDisplayEvent[]) {\n        let disabled = false;\n        if (this.markDisabled) {\n            disabled = this.markDisabled(selectedTime);\n        }\n\n        this.onTimeSelected.emit({\n            selectedTime: selectedTime,\n            events: events.map(e => e.event),\n            disabled: disabled\n        });\n    }\n\n    placeEvents(orderedEvents:IDisplayEvent[]) {\n        this.calculatePosition(orderedEvents);\n        WeekViewComponent.calculateWidth(orderedEvents, this.hourRange);\n    }\n\n    placeAllDayEvents(orderedEvents:IDisplayEvent[]) {\n        this.calculatePosition(orderedEvents);\n    }\n\n    overlap(event1:IDisplayEvent, event2:IDisplayEvent):boolean {\n        let earlyEvent = event1,\n            lateEvent = event2;\n        if (event1.startIndex > event2.startIndex || (event1.startIndex === event2.startIndex && event1.startOffset > event2.startOffset)) {\n            earlyEvent = event2;\n            lateEvent = event1;\n        }\n\n        if (earlyEvent.endIndex <= lateEvent.startIndex) {\n            return false;\n        } else {\n            return !(earlyEvent.endIndex - lateEvent.startIndex === 1 && earlyEvent.endOffset + lateEvent.startOffset >= this.hourParts);\n        }\n    }\n\n    calculatePosition(events:IDisplayEvent[]) {\n        let len = events.length,\n            maxColumn = 0,\n            isForbidden = new Array(len);\n\n        for (let i = 0; i < len; i += 1) {\n            let col:number;\n            for (col = 0; col < maxColumn; col += 1) {\n                isForbidden[col] = false;\n            }\n            for (let j = 0; j < i; j += 1) {\n                if (this.overlap(events[i], events[j])) {\n                    isForbidden[events[j].position] = true;\n                }\n            }\n            for (col = 0; col < maxColumn; col += 1) {\n                if (!isForbidden[col]) {\n                    break;\n                }\n            }\n            if (col < maxColumn) {\n                events[i].position = col;\n            } else {\n                events[i].position = maxColumn++;\n            }\n        }\n\n        if (this.dir === 'rtl') {\n            for (let i = 0; i < len; i += 1) {\n                events[i].position = maxColumn - 1 - events[i].position;\n            }\n        }\n    }\n\n    private static calculateWidth(orderedEvents:IDisplayEvent[], size:number) {\n        let cells = new Array(size);\n\n        // sort by position in descending order, the right most columns should be calculated first\n        orderedEvents.sort((eventA, eventB) => {\n            return eventB.position - eventA.position;\n        });\n        for (let i = 0; i < size; i += 1) {\n            cells[i] = {\n                calculated: false,\n                events: []\n            };\n        }\n        let len = orderedEvents.length;\n        for (let i = 0; i < len; i += 1) {\n            let event = orderedEvents[i];\n            let index = event.startIndex;\n            while (index < event.endIndex) {\n                cells[index].events.push(event);\n                index += 1;\n            }\n        }\n\n        let i = 0;\n        while (i < len) {\n            let event = orderedEvents[i];\n            if (!event.overlapNumber) {\n                let overlapNumber = event.position + 1;\n                event.overlapNumber = overlapNumber;\n                let eventQueue = [event];\n                while ((event = eventQueue.shift())) {\n                    let index = event.startIndex;\n                    while (index < event.endIndex) {\n                        if (!cells[index].calculated) {\n                            cells[index].calculated = true;\n                            if (cells[index].events) {\n                                let eventCountInCell = cells[index].events.length;\n                                for (let j = 0; j < eventCountInCell; j += 1) {\n                                    let currentEventInCell = cells[index].events[j];\n                                    if (!currentEventInCell.overlapNumber) {\n                                        currentEventInCell.overlapNumber = overlapNumber;\n                                        eventQueue.push(currentEventInCell);\n                                    }\n                                }\n                            }\n                        }\n                        index += 1;\n                    }\n                }\n            }\n            i += 1;\n        }\n    }\n\n    eventSelected(event:IEvent) {\n        this.onEventSelected.emit(event);\n    }\n\n    setScrollPosition(scrollPosition:number) {\n        this.initScrollPosition = scrollPosition;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n    selector: 'weekview',\n    template: `\n        <ion-slides #weekSlider [loop]=\"true\" [dir]=\"dir\" (ionSlideDidChange)=\"onSlideChanged()\">\n            <ion-slide>\n                <table class=\"table table-bordered table-fixed weekview-header\">\n                    <thead>\n                    <tr>\n                        <th class=\"calendar-hour-column\"></th>\n                        <th class=\"weekview-header text-center\" *ngFor=\"let dayHeader of views[0].dayHeaders\">{{dayHeader}}\n                        </th>\n                    </tr>\n                    </thead>\n                </table>\n                <div *ngIf=\"0===currentViewIndex\">\n                    <div class=\"weekview-allday-table\">\n                        <div class=\"weekview-allday-label\">{{allDayLabel}}</div>\n                        <ion-scroll scrollY=\"true\" class=\"weekview-allday-content-wrapper\" zoom=\"false\">\n                            <table class=\"table table-fixed weekview-allday-content-table\">\n                                <tbody>\n                                <tr>\n                                    <td *ngFor=\"let day of views[0].dates\" class=\"calendar-cell\">\n                                        <div [ngClass]=\"{'calendar-event-wrap': day.events}\" *ngIf=\"day.events\"\n                                             [ngStyle]=\"{height: 25*day.events.length+'px'}\">\n                                            <div *ngFor=\"let displayEvent of day.events\" class=\"calendar-event\" tappable\n                                                 (click)=\"eventSelected(displayEvent.event)\"\n                                                 [ngStyle]=\"{top: 25*displayEvent.position+'px', width: 100*(displayEvent.endIndex-displayEvent.startIndex)+'%', height: '25px'}\">\n                                                <ng-template [ngTemplateOutlet]=\"weekviewAllDayEventTemplate\"\n                                                    [ngOutletContext]=\"{displayEvent:displayEvent}\">\n                                                </ng-template>\n                                            </div>\n                                        </div>\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n                        </ion-scroll>\n                    </div>\n                    <init-position-scroll class=\"weekview-normal-event-container\" [initPosition]=\"initScrollPosition\" [emitEvent]=\"preserveScrollPosition\" (onScroll)=\"setScrollPosition($event)\">\n                        <table class=\"table table-bordered table-fixed weekview-normal-event-table\">\n                            <tbody>\n                            <tr *ngFor=\"let row of views[0].rows; let i = index\">\n                                <td class=\"calendar-hour-column text-center\">\n                                    {{hourColumnLabels[i]}}\n                                </td>\n                                <td *ngFor=\"let tm of row\" class=\"calendar-cell\" tappable (click)=\"select(tm.time, tm.events)\">\n                                    <div [ngClass]=\"{'calendar-event-wrap': tm.events}\" *ngIf=\"tm.events\">\n                                        <div *ngFor=\"let displayEvent of tm.events\" class=\"calendar-event\" tappable\n                                             (click)=\"eventSelected(displayEvent.event)\"\n                                             [ngStyle]=\"{top: (37*displayEvent.startOffset/hourParts)+'px',left: 100/displayEvent.overlapNumber*displayEvent.position+'%', width: 100/displayEvent.overlapNumber+'%', height: 37*(displayEvent.endIndex -displayEvent.startIndex - (displayEvent.endOffset + displayEvent.startOffset)/hourParts)+'px'}\">\n                                             <ng-template [ngTemplateOutlet]=\"weekviewNormalEventTemplate\"\n                                                 [ngOutletContext]=\"{displayEvent:displayEvent}\">\n                                             </ng-template>\n                                        </div>\n                                    </div>\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </init-position-scroll>\n                </div>\n                <div *ngIf=\"0!==currentViewIndex\">\n                    <div class=\"weekview-allday-table\">\n                        <div class=\"weekview-allday-label\">{{allDayLabel}}</div>\n                        <ion-scroll scrollY=\"true\" class=\"weekview-allday-content-wrapper\" zoom=\"false\">\n                            <table class=\"table table-fixed weekview-allday-content-table\">\n                                <tbody>\n                                <tr>\n                                    <td *ngFor=\"let day of views[0].dates\" class=\"calendar-cell\">\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n                        </ion-scroll>\n                    </div>\n                    <init-position-scroll class=\"weekview-normal-event-container\" [initPosition]=\"initScrollPosition\">\n                        <table class=\"table table-bordered table-fixed weekview-normal-event-table\">\n                            <tbody>\n                            <tr *ngFor=\"let row of views[0].rows; let i = index\">\n                                <td class=\"calendar-hour-column text-center\">\n                                    {{hourColumnLabels[i]}}\n                                </td>\n                                <td *ngFor=\"let tm of row\" class=\"calendar-cell\">\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </init-position-scroll>\n                </div>\n            </ion-slide>\n            <ion-slide>\n                <table class=\"table table-bordered table-fixed weekview-header\">\n                    <thead>\n                    <tr>\n                        <th class=\"calendar-hour-column\"></th>\n                        <th class=\"weekview-header text-center\" *ngFor=\"let dayHeader of views[1].dayHeaders\">{{dayHeader}}\n                        </th>\n                    </tr>\n                    </thead>\n                </table>\n                <div *ngIf=\"1===currentViewIndex\">\n                    <div class=\"weekview-allday-table\">\n                        <div class=\"weekview-allday-label\">{{allDayLabel}}</div>\n                        <ion-scroll scrollY=\"true\" class=\"weekview-allday-content-wrapper\" zoom=\"false\">\n                            <table class=\"table table-fixed weekview-allday-content-table\">\n                                <tbody>\n                                <tr>\n                                    <td *ngFor=\"let day of views[1].dates\" class=\"calendar-cell\">\n                                        <div [ngClass]=\"{'calendar-event-wrap': day.events}\" *ngIf=\"day.events\"\n                                             [ngStyle]=\"{height: 25*day.events.length+'px'}\">\n                                            <div *ngFor=\"let displayEvent of day.events\" class=\"calendar-event\" tappable\n                                                 (click)=\"eventSelected(displayEvent.event)\"\n                                                 [ngStyle]=\"{top: 25*displayEvent.position+'px', width: 100*(displayEvent.endIndex-displayEvent.startIndex)+'%', height: '25px'}\">\n                                                <ng-template [ngTemplateOutlet]=\"weekviewAllDayEventTemplate\"\n                                                    [ngOutletContext]=\"{displayEvent:displayEvent}\">\n                                                </ng-template>\n                                            </div>\n                                        </div>\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n                        </ion-scroll>\n                    </div>\n                    <init-position-scroll class=\"weekview-normal-event-container\" [initPosition]=\"initScrollPosition\" [emitEvent]=\"preserveScrollPosition\" (onScroll)=\"setScrollPosition($event)\">\n                        <table class=\"table table-bordered table-fixed weekview-normal-event-table\">\n                            <tbody>\n                            <tr *ngFor=\"let row of views[1].rows; let i = index\">\n                                <td class=\"calendar-hour-column text-center\">\n                                    {{hourColumnLabels[i]}}\n                                </td>\n                                <td *ngFor=\"let tm of row\" class=\"calendar-cell\" tappable (click)=\"select(tm.time, tm.events)\">\n                                    <div [ngClass]=\"{'calendar-event-wrap': tm.events}\" *ngIf=\"tm.events\">\n                                        <div *ngFor=\"let displayEvent of tm.events\" class=\"calendar-event\" tappable\n                                             (click)=\"eventSelected(displayEvent.event)\"\n                                             [ngStyle]=\"{top: (37*displayEvent.startOffset/hourParts)+'px',left: 100/displayEvent.overlapNumber*displayEvent.position+'%', width: 100/displayEvent.overlapNumber+'%', height: 37*(displayEvent.endIndex -displayEvent.startIndex - (displayEvent.endOffset + displayEvent.startOffset)/hourParts)+'px'}\">\n                                             <ng-template [ngTemplateOutlet]=\"weekviewNormalEventTemplate\"\n                                                 [ngOutletContext]=\"{displayEvent:displayEvent}\">\n                                             </ng-template>\n                                        </div>\n                                    </div>\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </init-position-scroll>\n                </div>\n                <div *ngIf=\"1!==currentViewIndex\">\n                    <div class=\"weekview-allday-table\">\n                        <div class=\"weekview-allday-label\">{{allDayLabel}}</div>\n                        <ion-scroll scrollY=\"true\" class=\"weekview-allday-content-wrapper\" zoom=\"false\">\n                            <table class=\"table table-fixed weekview-allday-content-table\">\n                                <tbody>\n                                <tr>\n                                    <td *ngFor=\"let day of views[1].dates\" class=\"calendar-cell\">\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n                        </ion-scroll>\n                    </div>\n                    <init-position-scroll class=\"weekview-normal-event-container\" [initPosition]=\"initScrollPosition\">\n                        <table class=\"table table-bordered table-fixed weekview-normal-event-table\">\n                            <tbody>\n                            <tr *ngFor=\"let row of views[1].rows; let i = index\">\n                                <td class=\"calendar-hour-column text-center\">\n                                    {{hourColumnLabels[i]}}\n                                </td>\n                                <td *ngFor=\"let tm of row\" class=\"calendar-cell\">\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </init-position-scroll>\n                </div>\n            </ion-slide>\n            <ion-slide>\n                <table class=\"table table-bordered table-fixed weekview-header\">\n                    <thead>\n                    <tr>\n                        <th class=\"calendar-hour-column\"></th>\n                        <th class=\"weekview-header text-center\" *ngFor=\"let dayHeader of views[2].dayHeaders\">{{dayHeader}}\n                        </th>\n                    </tr>\n                    </thead>\n                </table>\n                <div *ngIf=\"2===currentViewIndex\">\n                    <div class=\"weekview-allday-table\">\n                        <div class=\"weekview-allday-label\">{{allDayLabel}}</div>\n                        <ion-scroll scrollY=\"true\" class=\"weekview-allday-content-wrapper\" zoom=\"false\">\n                            <table class=\"table table-fixed weekview-allday-content-table\">\n                                <tbody>\n                                <tr>\n                                    <td *ngFor=\"let day of views[2].dates\" class=\"calendar-cell\">\n                                        <div [ngClass]=\"{'calendar-event-wrap': day.events}\" *ngIf=\"day.events\"\n                                             [ngStyle]=\"{height: 25*day.events.length+'px'}\">\n                                            <div *ngFor=\"let displayEvent of day.events\" class=\"calendar-event\" tappable\n                                                 (click)=\"eventSelected(displayEvent.event)\"\n                                                 [ngStyle]=\"{top: 25*displayEvent.position+'px', width: 100*(displayEvent.endIndex-displayEvent.startIndex)+'%', height: '25px'}\">\n                                                <ng-template [ngTemplateOutlet]=\"weekviewAllDayEventTemplate\"\n                                                    [ngOutletContext]=\"{displayEvent:displayEvent}\">\n                                                </ng-template>\n                                            </div>\n                                        </div>\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n                        </ion-scroll>\n                    </div>\n                    <init-position-scroll class=\"weekview-normal-event-container\" [initPosition]=\"initScrollPosition\" [emitEvent]=\"preserveScrollPosition\" (onScroll)=\"setScrollPosition($event)\">\n                        <table class=\"table table-bordered table-fixed weekview-normal-event-table\">\n                            <tbody>\n                            <tr *ngFor=\"let row of views[2].rows; let i = index\">\n                                <td class=\"calendar-hour-column text-center\">\n                                    {{hourColumnLabels[i]}}\n                                </td>\n                                <td *ngFor=\"let tm of row\" class=\"calendar-cell\" tappable (click)=\"select(tm.time, tm.events)\">\n                                    <div [ngClass]=\"{'calendar-event-wrap': tm.events}\" *ngIf=\"tm.events\">\n                                        <div *ngFor=\"let displayEvent of tm.events\" class=\"calendar-event\" tappable\n                                             (click)=\"eventSelected(displayEvent.event)\"\n                                             [ngStyle]=\"{top: (37*displayEvent.startOffset/hourParts)+'px',left: 100/displayEvent.overlapNumber*displayEvent.position+'%', width: 100/displayEvent.overlapNumber+'%', height: 37*(displayEvent.endIndex -displayEvent.startIndex - (displayEvent.endOffset + displayEvent.startOffset)/hourParts)+'px'}\">\n                                             <ng-template [ngTemplateOutlet]=\"weekviewNormalEventTemplate\"\n                                                 [ngOutletContext]=\"{displayEvent:displayEvent}\">\n                                             </ng-template>\n                                        </div>\n                                    </div>\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </init-position-scroll>\n                </div>\n                <div *ngIf=\"2!==currentViewIndex\">\n                    <div class=\"weekview-allday-table\">\n                        <div class=\"weekview-allday-label\">{{allDayLabel}}</div>\n                        <ion-scroll scrollY=\"true\" class=\"weekview-allday-content-wrapper\" zoom=\"false\">\n                            <table class=\"table table-fixed weekview-allday-content-table\">\n                                <tbody>\n                                <tr>\n                                    <td *ngFor=\"let day of views[2].dates\" class=\"calendar-cell\">\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n                        </ion-scroll>\n                    </div>\n                    <init-position-scroll class=\"weekview-normal-event-container\" [initPosition]=\"initScrollPosition\">\n                        <table class=\"table table-bordered table-fixed weekview-normal-event-table\">\n                            <tbody>\n                            <tr *ngFor=\"let row of views[2].rows; let i = index\">\n                                <td class=\"calendar-hour-column text-center\">\n                                    {{hourColumnLabels[i]}}\n                                </td>\n                                <td *ngFor=\"let tm of row\" class=\"calendar-cell\">\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </init-position-scroll>\n                </div>\n            </ion-slide>\n        </ion-slides>\n    `,\n    styles: [`\n        .table-fixed {\n          table-layout: fixed;\n        }\n\n        .table {\n          width: 100%;\n          max-width: 100%;\n          background-color: transparent;\n        }\n\n        .table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td,\n        .table > tbody > tr > td, .table > tfoot > tr > td {\n          padding: 8px;\n          line-height: 20px;\n          vertical-align: top;\n        }\n\n        .table > thead > tr > th {\n          vertical-align: bottom;\n          border-bottom: 2px solid #ddd;\n        }\n\n        .table > thead:first-child > tr:first-child > th, .table > thead:first-child > tr:first-child > td {\n          border-top: 0\n        }\n\n        .table > tbody + tbody {\n          border-top: 2px solid #ddd;\n        }\n\n        .table-bordered {\n          border: 1px solid #ddd;\n        }\n\n        .table-bordered > thead > tr > th, .table-bordered > tbody > tr > th, .table-bordered > tfoot > tr > th,\n        .table-bordered > thead > tr > td, .table-bordered > tbody > tr > td, .table-bordered > tfoot > tr > td {\n          border: 1px solid #ddd;\n        }\n\n        .table-bordered > thead > tr > th, .table-bordered > thead > tr > td {\n          border-bottom-width: 2px;\n        }\n\n        .table-striped > tbody > tr:nth-child(odd) > td, .table-striped > tbody > tr:nth-child(odd) > th {\n          background-color: #f9f9f9\n        }\n\n        .calendar-hour-column {\n          width: 50px;\n          white-space: nowrap;\n        }\n\n        .calendar-event-wrap {\n          position: relative;\n          width: 100%;\n          height: 100%;\n        }\n\n        .calendar-event {\n          position: absolute;\n          padding: 2px;\n          cursor: pointer;\n          z-index: 10000;\n        }\n\n        .calendar-cell {\n          padding: 0 !important;\n          height: 37px;\n        }\n\n        .weekview-allday-label {\n          float: left;\n          height: 100%;\n          line-height: 50px;\n          text-align: center;\n          width: 50px;\n        }\n\n        [dir=\"rtl\"] .weekview-allday-label {\n            float: right;\n            border-right: 1px solid #ddd;\n        }\n\n        .weekview-allday-content-wrapper {\n          margin-left: 50px;\n          overflow: hidden;\n          height: 51px;\n        }\n\n        [dir=\"rtl\"] .weekview-allday-content-wrapper {\n          margin-left: 0;\n          margin-right: 50px;\n        }\n\n        .weekview-allday-content-table {\n          min-height: 50px;\n        }\n\n        .weekview-allday-content-table td {\n          border-left: 1px solid #ddd;\n          border-right: 1px solid #ddd;\n        }\n\n        .weekview-header th {\n          overflow: hidden;\n          white-space: nowrap;\n          font-size: 14px;\n        }\n\n        .weekview-allday-table {\n          height: 50px;\n          position: relative;\n          border-bottom: 1px solid #ddd;\n          font-size: 14px;\n        }\n\n        .weekview-normal-event-container {\n          margin-top: 87px;\n          overflow: hidden;\n          left: 0;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          position: absolute;\n          font-size: 14px;\n        }\n\n        .weekview .slide-zoom {\n          height: 100%;\n        }\n\n        .weekview-allday-content-wrapper scroll-content {\n          width: 100%;\n        }\n\n        ::-webkit-scrollbar,\n        *::-webkit-scrollbar {\n          display: none;\n        }\n\n        .table > tbody > tr > td.calendar-hour-column {\n          padding-left: 0;\n          padding-right: 0;\n          vertical-align: middle;\n        }\n\n        @media (max-width: 750px) {\n          .weekview-allday-label, .calendar-hour-column {\n            width: 31px;\n            font-size: 12px;\n          }\n\n          .weekview-allday-label {\n            padding-top: 4px;\n          }\n\n          .table > tbody > tr > td.calendar-hour-column {\n            padding-left: 0;\n            padding-right: 0;\n            vertical-align: middle;\n            line-height: 12px;\n          }\n\n          .table > thead > tr > th.weekview-header {\n            padding-left: 0;\n            padding-right: 0;\n            font-size: 12px;\n          }\n\n          .weekview-allday-label {\n            line-height: 20px;\n          }\n\n          .weekview-allday-content-wrapper {\n            margin-left: 31px;\n          }\n\n          [dir=\"rtl\"] .weekview-allday-content-wrapper {\n            margin-left: 0;\n            margin-right: 31px;\n          }\n        }\n    `],\n    encapsulation: ViewEncapsulation.None\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: CalendarService, },\n{type: ElementRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'slider': [{ type: ViewChild, args: ['weekSlider', ] },],\n'class': [{ type: HostBinding, args: ['class.weekview', ] },],\n'weekviewAllDayEventTemplate': [{ type: Input },],\n'weekviewNormalEventTemplate': [{ type: Input },],\n'formatWeekTitle': [{ type: Input },],\n'formatWeekViewDayHeader': [{ type: Input },],\n'formatHourColumn': [{ type: Input },],\n'startingDayWeek': [{ type: Input },],\n'allDayLabel': [{ type: Input },],\n'hourParts': [{ type: Input },],\n'eventSource': [{ type: Input },],\n'markDisabled': [{ type: Input },],\n'locale': [{ type: Input },],\n'dateFormatter': [{ type: Input },],\n'dir': [{ type: Input },],\n'scrollToHour': [{ type: Input },],\n'preserveScrollPosition': [{ type: Input },],\n'lockSwipeToPrev': [{ type: Input },],\n'lockSwipes': [{ type: Input },],\n'startHour': [{ type: Input },],\n'endHour': [{ type: Input },],\n'onRangeChanged': [{ type: Output },],\n'onEventSelected': [{ type: Output },],\n'onTimeSelected': [{ type: Output },],\n'onTitleChanged': [{ type: Output },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}